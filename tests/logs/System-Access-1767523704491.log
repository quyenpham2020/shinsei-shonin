[2026-01-04T10:48:24.491Z] 
================================================================================

[2026-01-04T10:48:24.498Z] TEST MODULE: System-Access
[2026-01-04T10:48:24.519Z] Started at: 2026/1/4 19:48:24
[2026-01-04T10:48:24.520Z] ================================================================================

[2026-01-04T10:48:24.521Z] Starting System Access Module Tests...
[2026-01-04T10:48:24.521Z] 
--------------------------------------------------------------------------------
[2026-01-04T10:48:24.521Z] SETUP: Login users
[2026-01-04T10:48:24.522Z] --------------------------------------------------------------------------------
[2026-01-04T10:48:24.523Z] 
[Step 1] Login as admin
[2026-01-04T10:48:24.678Z] ✅ Admin authenticated
[2026-01-04T10:48:24.679Z] 
[Step 2] Login as user
[2026-01-04T10:48:24.762Z] ✅ User authenticated (ID: 18)
[2026-01-04T10:48:25.276Z] 
--------------------------------------------------------------------------------
[2026-01-04T10:48:25.277Z] TEST 1: Get My System Access
[2026-01-04T10:48:25.277Z] --------------------------------------------------------------------------------
[2026-01-04T10:48:25.278Z] 
[Step 1] Get admin system access
[2026-01-04T10:48:25.288Z] ℹ️  Response saved to: C:\Work\shinsei-shonin\tests\screenshots\system-access\admin-my-access-1767523705287.json
[2026-01-04T10:48:25.289Z] ✅ Admin access: All systems
[2026-01-04T10:48:25.289Z] 
[Step 2] Get user system access
[2026-01-04T10:48:25.294Z] ℹ️  Response saved to: C:\Work\shinsei-shonin\tests\screenshots\system-access\user-my-access-1767523705294.json
[2026-01-04T10:48:25.295Z] ✅ User access: 
[2026-01-04T10:48:25.296Z] ✅ TEST PASSED: Get My System Access
[2026-01-04T10:48:25.296Z]   Details: {
  "adminSystems": [],
  "userSystems": []
}
[2026-01-04T10:48:25.803Z] 
--------------------------------------------------------------------------------
[2026-01-04T10:48:25.804Z] TEST 2: Get All Users With Access
[2026-01-04T10:48:25.804Z] --------------------------------------------------------------------------------
[2026-01-04T10:48:25.805Z] 
[Step 1] Fetch all users with their system access
[2026-01-04T10:48:25.811Z] ℹ️  Response saved to: C:\Work\shinsei-shonin\tests\screenshots\system-access\get-users-with-access-1767523705811.json
[2026-01-04T10:48:25.812Z] ✅ Found 10 users
[2026-01-04T10:48:25.812Z] ℹ️  Sample users with access:
[2026-01-04T10:48:25.812Z]   - dev001: Developer 1 - [weekly-report, shinsei-shonin]
[2026-01-04T10:48:25.813Z]   - teamlead001: Team Leader 1 - [weekly-report, shinsei-shonin]
[2026-01-04T10:48:25.813Z]   - admin: admin - []
[2026-01-04T10:48:25.814Z]   - g71: g71 - [weekly-report, shinsei-shonin]
[2026-01-04T10:48:25.814Z]   - quyen: quyen - [weekly-report, shinsei-shonin]
[2026-01-04T10:48:25.815Z] ✅ TEST PASSED: Get All Users With Access
[2026-01-04T10:48:25.815Z]   Details: {
  "totalUsers": 10
}
[2026-01-04T10:48:26.331Z] 
--------------------------------------------------------------------------------
[2026-01-04T10:48:26.332Z] TEST 3: Bulk Update System Access
[2026-01-04T10:48:26.332Z] --------------------------------------------------------------------------------
[2026-01-04T10:48:26.333Z] 
[Step 1] Get current user access
[2026-01-04T10:48:26.339Z] ℹ️  Current systems: 
[2026-01-04T10:48:26.340Z] 
[Step 2] Update system access
[2026-01-04T10:48:26.340Z] ℹ️  Updating access: [
  {
    "userId": 18,
    "systems": [
      "shinsei-shonin",
      "weekly-report"
    ]
  }
]
[2026-01-04T10:48:26.351Z] ℹ️  Response saved to: C:\Work\shinsei-shonin\tests\screenshots\system-access\bulk-update-access-1767523706350.json
[2026-01-04T10:48:26.351Z] ✅ System access updated successfully
[2026-01-04T10:48:26.352Z] 
[Step 3] Verify updated access
[2026-01-04T10:48:26.357Z] ℹ️  Updated systems: shinsei-shonin, weekly-report
[2026-01-04T10:48:26.357Z] ✅ TEST PASSED: Bulk Update System Access
[2026-01-04T10:48:26.358Z]   Details: {
  "userId": 18,
  "updatedSystems": [
    "shinsei-shonin",
    "weekly-report"
  ]
}
[2026-01-04T10:48:26.861Z] 
--------------------------------------------------------------------------------
[2026-01-04T10:48:26.862Z] TEST 4: Access Restriction Verification
[2026-01-04T10:48:26.862Z] --------------------------------------------------------------------------------
[2026-01-04T10:48:26.862Z] 
[Step 1] Test non-admin cannot update access
[2026-01-04T10:48:26.879Z] ✅ Non-admin correctly denied access to update
[2026-01-04T10:48:26.880Z] ✅ TEST PASSED: Access Restriction Verification
[2026-01-04T10:48:26.881Z] 
================================================================================
[2026-01-04T10:48:26.882Z] TEST SUMMARY
[2026-01-04T10:48:26.886Z] ================================================================================
[2026-01-04T10:48:26.886Z] Total Tests: 4
[2026-01-04T10:48:26.887Z] Passed: 4
[2026-01-04T10:48:26.887Z] Failed: 0
[2026-01-04T10:48:26.888Z] Duration: 2.39s
[2026-01-04T10:48:26.888Z] Log file: C:\Work\shinsei-shonin\tests\logs\System-Access-1767523704491.log
[2026-01-04T10:48:26.889Z] ================================================================================

